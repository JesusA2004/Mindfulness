/* =========================
   Paleta & Base
   ========================= */
:root{
  --mf-green: #0b5b49;
  --mf-green-2:#0f7a61;
  --mf-purple: #0828f7;
  --mf-purple-2:#1d0cb7;
  --mf-ink:#0f172a;
  --mf-soft:#f5f6f8;
  --mf-card:#ffffff;
  --mf-muted:#6b7280;
}

/* Quitar la 'X' nativa del input search (usamos nuestro botón) */
.search-group input[type="search"]::-webkit-search-cancel-button { display:none; }
.search-group input[type="search"]::-webkit-search-decoration { display:none; }
.search-group input[type="search"]::-ms-clear { display:none; width:0; height:0; }

.panel-wrapper{
  background: var(--mf-soft);
}

/* =========================
   Toolbar + Búsqueda + Botón Nuevo
   ========================= */
.toolbar{
  padding-top:.4rem;
  padding-bottom:.8rem;
}

.search-group .input-group-text{
  background:#fff;
  border-right:0;
  border-radius:9999px 0 0 9999px !important;
}
.search-group .input-group-text i{
  font-size:1.1rem;
  color:#8a8f98;
}
.search-group .form-control{
  border-left:0;
  border-radius:0 9999px 9999px 0 !important;
}
.search-group .form-control:focus{
  border-color: rgba(122,0,184,.45);
  box-shadow:0 0 0 .2rem rgba(122,0,184,.12);
}

/* Botón "Nuevo" */
.btn-gradient{
  background: #0cc85a !important;
  color:#ffffff !important;
  border:0;
  transition: filter .15s ease, transform .15s ease, box-shadow .15s ease;
}
.btn-gradient:hover,
.btn-gradient:focus,
.btn-gradient:active{
  filter:brightness(1.06);
  transform: translateY(-1px);
  box-shadow:0 .9rem 1.6rem rgba(122,0,184,.18);
}
.btn-gradient i,
.btn-gradient *{
  color:#fffefe !important;
}
.btn-new{ letter-spacing:.2px; }
.btn-gradient .spinner-border{
  --bs-spinner-border-color: rgba(255,255,255,.85);
  --bs-spinner-border-width: .2em;
}

/* =========================
   Grid: EXACTAMENTE 3 CARDS POR FILA en ≥992px
   ========================= */
@media (min-width: 576px){
  .row.g-3 > .col-12.col-sm-6.col-lg-4.col-xxl-3{ flex: 0 0 50%; max-width:50%; }
}
@media (min-width: 992px){
  .row.g-3 > .col-12.col-sm-6.col-lg-4.col-xxl-3{ flex: 0 0 33.333333%; max-width:33.333333%; }
}
@media (min-width: 1400px){
  .row.g-3 > .col-12.col-sm-6.col-lg-4.col-xxl-3{
    flex: 0 0 33.333333% !important;
    max-width:33.333333% !important;
  }
}

/* =========================
   Cards
   ========================= */
.item-card{
  background: var(--mf-card);
  border:1px solid rgba(122,0,184,.08);
  border-radius:1rem;
  transition: transform .15s ease, box-shadow .15s ease, border-color .2s ease;
  min-height: 290px;
  display:flex;
  flex-direction:column;
}
.item-card:hover{
  transform: translateY(-2px);
  border-color: rgba(122,0,184,.22);
  box-shadow: 0 .9rem 1.6rem rgba(122,0,184,.12);
}
.item-card .card-body{ padding:1rem 1rem .75rem 1rem; }
.card-title{ color:var(--mf-ink); font-size:1.08rem; }

/* Tipografía responsive mínima (apoyo a móviles) */
@media (max-width: 575.98px){
  .card-title{ font-size:1rem; }
  .btn-with-label{ font-size:.925rem; }
}

/* Descripción: clamp a 3 líneas */
.clamp-3{
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  overflow:hidden;
  color:#374151;
  line-height:1.45;
}

/* Etiqueta categoría */
.small.text-muted{ color: var(--mf-muted) !important; }

/* Badges de estado con gradiente */
.bg-status.bg-success{
  background: linear-gradient(135deg, #198754, #20c997);
  color:#fff;
}
.bg-status.bg-secondary{
  background: linear-gradient(135deg, #6c757d, #9aa3ad);
  color:#fff;
}

/* Footer de la card fijo abajo para alinear botones */
.item-card .card-footer{ margin-top:auto; }

/* =========================
   Botonera con texto (accesible)
   ========================= */
.btn-with-label{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:44px;      /* objetivo táctil recomendado */
  gap:.35rem;
  white-space:nowrap;
  border-radius:.8rem;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease, color .12s ease;
}
.btn-with-label i{ font-size:1.05rem; line-height:1; }

/* Consultar */
.item-card .btn-outline-secondary{
  border:1px solid rgba(80, 81, 82, 0.28);
  color:#4b5563;
  background:#fff;
}
.item-card .btn-outline-secondary:hover{
  border-color: rgba(99,102,113,.45);
  box-shadow:0 .3rem .8rem rgba(15,23,42,.08);
  transform: translateY(-1px);
}

/* Modificar */
.item-card .btn-outline-primary{
  border:1px solid rgb(14, 103, 255);
  color: var(--mf-purple);
  background:#fff;
}
.item-card .btn-outline-primary:hover{
  background:#245ff4;
  border-color: rgba(0, 80, 184, 0.929);
  box-shadow:0 .35rem .9rem rgba(122,0,184,.15);
  transform: translateY(-1px);
  color:#f6f6f7 !important;
}

/* Eliminar */
.item-card .btn-outline-danger{
  border:1px solid rgba(220,53,69,.35);
  color:#c0392b;
  background:#fff;
}
.item-card .btn-outline-danger:hover{
  background:#f51313;
  border-color: rgba(220,53,69,.55);
  box-shadow:0 .35rem .9rem rgba(220,53,69,.12);
  transform: translateY(-1px);
  color:#ffffff !important;
}

/* =========================
   Skeletons / Placeholders
   ========================= */
.placeholder{ display:inline-block; background-color:#e9ecef; border-radius:.35rem; }
.placeholder-glow .placeholder{ animation: placeholder-glow 1.6s ease-in-out infinite; }
@keyframes placeholder-glow{ 50%{ opacity:.4; } }

/* =========================
   Modales
   ========================= */
.modal-content{ border-radius:1rem; }
.modal-title{
  font-weight:800;
  background: linear-gradient(135deg, var(--mf-green), var(--mf-purple));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.btn-close{ box-shadow:none !important; }

/* === Botón Cancelar del modal en gris (refuerzo visual) === */
.modal-footer .btn.btn-outline-secondary{
  border:1px solid #9aa3ad;
  color:#ffffff;
  background:#616161;
}
.modal-footer .btn.btn-outline-secondary:hover,
.modal-footer .btn.btn-outline-secondary:focus-visible{
  border-color:#3f3f3f;
  box-shadow:0 .3rem .8rem rgba(15,23,42,.12);
  transform: translateY(-1px);
}

/* ====== Ajustes responsivos adicionales ====== */

/* Botón +Nuevo más delgado */
.btn-new {
  padding: .5rem 1.2rem !important;
  font-size: 1rem;
}

/* Placeholder adaptativo */
.search-input::placeholder {
  font-size: 1rem;
  white-space: nowrap;
}

/* En pantallas pequeñas, reduce el texto */
@media (max-width: 768px) {
  .search-input::placeholder {
    font-size: .9rem;
    content: "Buscar…";
  }
}

/* En móviles muy pequeños, aún más corto */
@media (max-width: 480px) {
  .search-input::placeholder {
    font-size: .85rem;
    content: "Buscar…";
  }
}


/* ====== Colapsables ====== */
.section-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:.65rem .85rem; border:1px solid rgba(122,0,184,.12);
  border-radius:.75rem; background:#fff; cursor:pointer;
  transition: background .15s ease, box-shadow .15s ease;
}
.section-header:hover{ background:#fafbfc; box-shadow:0 .15rem .35rem rgba(15,23,42,.06); }
.section-body{ padding: .85rem 0 .25rem 0; }

.q-accordion{ border:1px solid rgba(122,0,184,.12); border-radius:.75rem; background:#fff; }
.q-header{ display:flex; align-items:center; gap:.5rem; padding:.6rem .75rem; cursor:pointer; }
.q-header:hover{ background:#fafbfc; }
.q-body{ padding:.75rem .9rem .9rem .9rem; border-top:1px dashed rgba(15,23,42,.08); }

.rotate{ transform: rotate(180deg); transition: transform .2s ease; }
.fade-enter-active, .fade-leave-active { transition: opacity .18s ease; }
.fade-enter-from, .fade-leave-to { opacity: 0; }

.slide-fade-enter-active, .slide-fade-leave-active{ transition: all .22s ease; }
.slide-fade-enter-from, .slide-fade-leave-to{ opacity:0; transform: translateY(-6px); }

/* ====== Z-index para no chocar con navbar fijo ====== */
:global(.modal){ z-index: 2000; }
:global(.modal-backdrop){ z-index: 1990; }

/* ====== MODAL FLEX LAYOUT (la clave del fix) ====== */
/* El dialog NO usa modal-dialog-scrollable; usamos layout propio */
:global(.modal-fit){
  /* altura disponible de la ventana con margen mínimo */
  max-height: calc(100dvh - 2rem);
  width: auto;
  margin: 1rem auto;
}

:global(.modal-flex){
  display: flex;
  flex-direction: column;
  /* asegura que no rebase la pantalla */
  max-height: calc(100dvh - 2rem);
}

/* Header fijo dentro del modal */
.modal-header.sticky-top{ top:0; z-index: 3; }

/* El body es el ÚNICO que hace scroll */
.modal-scroll{
  overflow: auto;
  /* evita rebases y deja sitio al footer = alto aproximado del footer */
  max-height: calc(100dvh - 2rem - 64px - 72px); /* viewport - márgenes - header - footer */
}

/* Footer siempre visible + sombra */
.modal-footer-sticky{
  position: sticky;
  bottom: 0;
  z-index: 4;
  background: #fff;
  border-top: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 -6px 10px -8px rgba(0,0,0,.35);
}

/* Seguridad extra por si el contenido llega hasta el borde inferior */
.modal-body-safe{ padding-bottom: 96px; }
.safe-bottom-space{ height: 84px; }

/* Botón luz */
.btn-light{ border:1px solid rgba(15,23,42,.08); }